<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Bytagramm.CommunitiesPage"
             xmlns:viewmodel="clr-namespace:Bytagramm.ViewModels"
             xmlns:communitymodel="clr-namespace:Bytagramm.Dto.Community"
             x:DataType="viewmodel:CommunitiesViewModel">
    
    <Grid Padding="10" ColumnSpacing="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Communities -->
        <StackLayout Grid.Column="0">
            <Label Text="Communities"
                   FontSize="18"
                   FontAttributes="Bold"
                   Margin="0,0,0,10" />

            <CollectionView ItemsSource="{Binding Communities}"
                            SelectionMode="Single"
                            SelectionChangedCommand="{Binding OpenCommunityCommand}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="communitymodel:CommunityDto">
                        <Frame Padding="5" Margin="0,5"
                               HasShadow="True"
                               CornerRadius="8"
                               BackgroundColor="#f3f3f3">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer
                                    Command="{Binding Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type ContentPage}}, Path=BindingContext.OpenCommunityCommand}"
                                    CommandParameter="{Binding .}" />
                            </Frame.GestureRecognizers>
                            <Label Text="{Binding Title}"
                                   FontSize="14"
                                   TextColor="#000"/>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
    </Grid>
    
    
</ContentPage>